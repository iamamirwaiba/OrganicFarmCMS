<?xml version="1.0" encoding="UTF-8"?>
    <databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
    xmlns:pro="http://www.liquibase.org/xml/ns/pro"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.9.xsd
http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd
http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.9.xsd">

    <!--    <changeSet id="0001" author="Amir">-->
    <!--        <sqlFile path="db/changelog/sql/v0003.sql"/>-->
    <!--    </changeSet>-->
    <changeSet id="00003" author="Sudip Pakhrin">
        <dropForeignKeyConstraint baseTableName="leave" constraintName="fk_employee_id"/>
        <dropColumn tableName="leave" columnName="employee_id"/>
        <dropColumn tableName="leave" columnName="remaining_leave"/>
        <addColumn tableName="leave">
            <column name="designation_id" type="integer"/>
        </addColumn>
        <addForeignKeyConstraint baseTableName="leave" baseColumnNames="designation_id" constraintName="fk_designation_id" referencedTableName="designation"
                                 referencedColumnNames="id"/>

        <createTable tableName="remaining_leave">
            <column name="id" type="integer" autoIncrement="true"/>
            <column name="remaining_leave" type="integer"/>
            <column name="employee_id" type="integer"/>
        </createTable>
        <addForeignKeyConstraint baseTableName="remaining_leave" baseColumnNames="employee_id" constraintName="fk_employee_id"
                                 referencedTableName="employee"
                                 referencedColumnNames="id"/>
    </changeSet>


    <!--<include file="db/changelog/changes/"/>-->

    </databaseChangeLog>